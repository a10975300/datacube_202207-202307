{% extends base_template %}
{% load i18n xadmin_tags %}
{% load static %}

{% block bodyclass %}dashboard{% endblock %}
{% block breadcrumbs %}{% endblock %}

{% block nav_title %}
  {% if icon %}<i class="{{icon}}"></i>{%endif%} {{ title }}
{% endblock %}

{% block nav_toggles %}
{% include "xadmin/includes/toggle_menu.html" %}
{% if has_add_widget_permission %}
  <a title="{% trans 'Add Widget' %}" href="{{ add_widget_url }}" class="navbar-toggle pull-right">
    <i class="fa fa-plus"></i></a>
{% endif %}
{% endblock %}

{% block nav_btns %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% if has_add_widget_permission %}
    <a title="{% trans 'Add Widget' %}" href="{{ add_widget_url }}" class="btn btn-primary">
    <i class="fa fa-plus"></i> <span>{% trans "Add Widget" %}</span></a>
    {% endif %}
{% endblock %}

{% block content %}

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Dashboard</title>

    <!-- fonts -->
    <link href="{% static 'dashboard/vendor/fontawesome/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <!-- Css-->
    <link href="{% static 'dashboard/css/Dashboard.min.css' %}" rel="stylesheet">
    <!-- dataTables 和 searchPanes 和導出按鈕 的CSS  -->
    <link  rel="stylesheet" href="{% static 'dashboard/vendor/datatables/jquery.dataTables.min.css' %}" >
    <link  rel="stylesheet" href="{% static 'dashboard/vendor/searchpanes/searchPanes.dataTables.min.css' %}" >
    <link  rel="stylesheet" href="{% static 'dashboard/vendor/searchpanes/select.dataTables.min.css' %}" >
    <link  rel="stylesheet" href="{% static 'dashboard/vendor/datatables/buttons.dataTables.min.css' %}" >

    <body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper" >
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content" class="bg-white">
                <!-- Page Content -->
                <div class="container-fluid" >
                    <!-- 4card -->
                    <div class="row mt-2">
                        <!-- product -->
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card border-left-primary shadow h-100">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2 justify-content-center">
                                            <div class="font-weight-bold text-uppercase mb-1">
                                                <a href="{{request.path}}product/products/" title="Click to view product list.">PRODUCT</a>
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-center" title="total product quantity">{{ product_qty }}</div>
                                            <hr>
                                              <div class="row">
                                                    <div class="col-sm-4 text-center">
                                                      {{ production_qty }} Prod.
                                                    </div>
                                                    <div class="col-sm-4 text-center">
                                                      {{ ramp_build_qty }} Ramp
                                                    </div>
                                                    <div class="col-sm-4 text-center">
                                                      {{ npi_build_qty }} Dev.
                                                    </div>
                                              </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- product -->

                        <!-- NPI Issue -->
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card border-left-primary shadow h-100 ">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="font-weight-bold text-uppercase mb-1">
                                                <a href="{{request.path}}npi/issue/" title="Click to view the detail of product.">NPI ISSUE</a>
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-center">{{ npi_issue_qty }}</div>
                                             <hr>

                                              <div class="row">
                                                    <div class="col-sm-6 text-center">
                                                      {{ closed_rate }}% Fixed
                                                    </div>
                                                    <div class="col-sm-6 text-center">
                                                      {{ occ_rate }}% OOC
                                                    </div>
                                              </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- NPI Issue -->

                        <!-- DEM -->
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card border-left-primary shadow h-100">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="font-weight-bold text-uppercase mb-1">
                                                <a href="{{request.path}}dfm/dfm_review_result/" title="Click to view the detail of dfm.">DFM</a>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 text-center">
                                                    {{ dfm_teared_qty }} Teared
                                                </div>
                                                <div class="col-sm-6 text-center">
                                                    {{ dfm_high_risk_qty }} High Risk
                                                </div>
                                              </div>
                                             <hr>
                                              <div class="row">
                                                  <div class="col-sm-6 text-center">
                                                      {{ dfm_p1_qty }} P1
                                                  </div>
                                                  <div class="col-sm-6 text-center">
                                                      {{ dfm_nud_qty }} NUD
                                                  </div>
                                              </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- DEM -->

                        <!-- Sustaining -->
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card border-left-primary shadow h-100">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="font-weight-bold text-uppercase mb-1">SUSTAINING</div>
                                            <div class="h5 mb-0 font-weight-bold text-center text-muted">under construction</div>
                                             <hr>

                                              <div class="row">
                                                    <div class="col-sm-6 text-center">

                                                    </div>
                                                    <div class="col-sm-6 text-center">

                                                    </div>
                                              </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Sustaining -->
                    </div>
                     <!-- 4card-->

                    <!-- tab 分頁 -->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card mb-3" style="border:none;">
                                <div class="card-body">
                                    <ul class="nav nav2 nav-tabs justify-content-end" id="myTab">
                                        <li class="nav-item active"> <a class="nav-link" data-toggle="tab" href="#Product-tab-page">Product</a> </li>
                                        <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#DFM-tab-page">DFM</a> </li>
                                        <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#NPI-tab-page">NPI Issue</a> </li>
                                        <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#SystemCosmetic-tab-page">System Cosmetic</a> </li>
                                        <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#Sustaining-tab-page">Sustaining</a> </li>
                                    </ul>
                                    <!-- tab 內頁 -->
                                    <div class="tab-content tabcontent-border">

                                        <!-- product-tab-page -->
                                        <div class="tab-pane active" role="tabpanel" id="Product-tab-page">

                                            <div class="row">
                                                <div class="col-xl-4 col-lg-4 mt-4">
                                                    <div class="card shadow mb-3 h-100">
                                                        <div class="card-body">
                                                            <div class="chart-pie-md pt-2">
                                                                <canvas id="product-pie1"></canvas>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-xl-8 col-lg-8 mt-4">
                                                    <div class="card shadow mb-3 h-100">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table id="product-table1" class="display compact nowrap">
                                                                    <thead >
                                                                        <tr>
                                                                            <th>Risk Ass</th>
                                                                            <th>Stage</th>
                                                                            <th>Product</th>
                                                                            <th>RTP Date</th>
                                                                            <th>Factory</th>
                                                                            <th>PE</th>
<!--                                                                            <th>DFM</th>-->
                                                                            <th>NPI Issue</th>
<!--                                                                            <th>Sustaining</th>-->
                                                                            <!-- <th>Yield Rate</th>-->
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                     {% for item in product_table_data %}
                                                                            <tr>
                                                                                <td>...</td>
                                                                                <!-- 通过日期判断当前stage是 -->
                                                                                {% if date_today > item.RTP|add:date_delta %}
                                                                                    <td>MP</td>
                                                                                {% elif date_today > item.RTP and date_today < item.RTP|add:date_delta %}
                                                                                    <td>Ramp</td>
                                                                                {% elif date_today > item.BuildDate_MV %}
                                                                                    <td>MV</td>
                                                                                {% elif date_today > item.BuildDate_PV %}
                                                                                    <td>PV</td>
                                                                                {% elif date_today > item.BuildDate_SI %}
                                                                                    <td>SI</td>
                                                                                {% else %}
                                                                                    <td>TBD</td>
                                                                                {% endif %}
                                                                                <td class="table_fontsize"><a href="{{request.path}}product/products/?_p_ProductName__in={{ item.ProductName }}" title="{{ item.ProductName }}">{{ item.ProductName }}</a></td>
                                                                                <td>{{ item.RTP|date:'Y-m-d' }}</td>
                                                                                <td>{{ item.PartnerName }}</td>
                                                                                <td>{{ item.PE }}</td>
                                                                                <td class="table_fontsize"><a href="{{request.path}}npi/issue/?_p_platformName__ProductName__in={{ item.ProductName }}" title=" click to check {{ item.ProductName }} issues" >{{ item.PlatformName__buildstage__count }}</a></td>

<!--                                                                                <td>{{ item.create_date|date:'Y-m-d' }}</td>-->
                                                                            </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- product-tab-page -->

                                        <!-- DFM-tab-page -->
                                        <div class="tab-pane" role="tabpanel" id="DFM-tab-page">


                                             <!-- issue1 -->
                                             <div class="row ">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#DFM-collapse1" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="DFM-collapse1">
                                                             <h5 class="m-0 font-weight-bold">DFM Issue</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse show" id="DFM-collapse1">
                                                             <div class="card-body">

                                                                 <!-- row1 -->
                                                                <div class="row">
                                                                    <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="DFM-pie1"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <!-- chart-->
                                                                                <div class="chart-pie">
                                                                                    <canvas id="DFM-radar1"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <!-- row1-->

                                                                 <!-- row2-->
                                                               <div class="row">
                                                                   <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <!-- chart-->
                                                                                <div class="chart-bar-md">
                                                                                    <canvas id="DFM-bar1"></canvas>
                                                                                </div>
                                                                                <!-- chart table-->
                                                                                 <div id="DFM-bar1-table"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                   <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <!-- chart-->
                                                                                <div class="chart-bar">
                                                                                    <canvas id="DFM-bar2"></canvas>
                                                                                </div>
                                                                                <!-- chart table-->
                                                                                 <div id="DFM-bar2-table"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                   <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="DFM-table1" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>Product</th>
                                                                                                <th>Assembly Level</th>
                                                                                                <th>Priority</th>
                                                                                                <th>CNC</th>
                                                                                                <th>SI</th>
                                                                                                <th>PV</th>
                                                                                                <th>MV</th>
                                                                                                <th>NUD</th>
                                                                                                <th>Issue Sympton</th>
                                                                                                <th>Design Structures of issues</th>
                                                                                                <th>Types of solutions</th>
                                                                                                <th>Examined Items Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            {% for item in dfm_issue %}
                                                                                                <tr>
                                                                                                    <td>{{ item.dfm_product__ProductName}}</td>
                                                                                                    <td>{{ item.dfm_review_item_desc__dfm_assembly_level}}</td>
                                                                                                    <td>{{ item.dfm_review_item_desc__dfm_item_priority}}</td>
                                                                                                    <td>{{ item.dfm_product_cnc}}</td>
                                                                                                    <td>{{ item.dfm_product_si}}</td>
                                                                                                    <td>{{ item.dfm_product_pv}}</td>
                                                                                                    <td>{{ item.dfm_product_mv}}</td>
                                                                                                    <td>{{ item.dfm_product_nud}}</td>
                                                                                                    <td>{{ item.dfm_product_issue_symptom}}</td>
                                                                                                    <td>{{ item.dfm_product_design_structures}}</td>
                                                                                                    <td>{{ item.dfm_product_solution_category}}</td>
                                                                                                    <td>{{ item.dfm_review_item_desc__count}}</td>
                                                                                                </tr>
                                                                                            {% endfor %}
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                               </div>
                                                                 <!-- row2-->

                                                              <!-- filter_button -->
                                                                <div class="row ml-1">
                                                                    <button id="DFM-filter-button1" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                    <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="DFM-filter1">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                              <!--   <form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin4" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax4" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->


                                                                                <div id="DFM-filter-panel1"></div>
                                                                                <button id="DFM-redraw1" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->

                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <!-- issue1 -->

                                        </div>
                                        <!-- DFM-tab-page -->

                                        <!-- NPI-tab-page -->
                                         <div class="tab-pane" role="tabpanel" id="NPI-tab-page">

                                             <!-- issue1 -->
                                             <div class="row ">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#NPI-collapse1" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="NPI-collapse1">
                                                             <h5 class="m-0 font-weight-bold">Design issue</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse show" id="NPI-collapse1">
                                                             <div class="card-body">
                                                                <!-- row1 -->
                                                                 <div class="row">
                                                                    <div class="col-xl-5 col-lg-5 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie-lg">
                                                                                    <canvas id="NPI-pie1"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                      <div class="col-xl-7 col-lg-7 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-bar-md pt-2">
                                                                                    <canvas id="NPI-bar1"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="NPI-table1" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>Root Cause</th>
                                                                                                <th>Short-term Category</th>
                                                                                                <th>Long-term Category</th>
                                                                                                <th>Issue Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            {% for item in statistic_by_rc %}
                                                                                                <tr>
                                                                                                    <td>{{ item.root_cause_category}}</td>
                                                                                                    <td>{{item.short_term_category }}</td>
                                                                                                    <td>{{item.long_term_category}}</td>
                                                                                                    <td>{{ item.root_cause_category__count }}</td>
                                                                                                </tr>
                                                                                            {% endfor %}
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                 </div>
                                                                <!-- row1 -->

                                                               <!-- row2
                                                                 <div class="row">

                                                               </div>-->

                                                                 <!-- filter_button -->
                                                                <div class="row ml-1">
                                                                    <button id="NPI-filter-button1" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                    <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="NPI-filter1">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                                <!--<form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin1" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax1" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->


                                                                                <div id="NPI-filter-panel1"></div>
                                                                                <button id="NPI-redraw1" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->
                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <!-- issue1 -->

                                             <!-- issue3 -->
                                             <div class="row ">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#NPI-collapse3" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="NPI-collapse3">
                                                             <h5 class="m-0 font-weight-bold">Oveall issue impact Factory</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse" id="NPI-collapse3">
                                                             <div class="card-body">

                                                                 <!-- row1 -->
                                                                <div class="row">
                                                                    <div class="col-xl-5 col-lg-5 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="NPI-pie3"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                     <div class="col-xl-7 col-lg-7 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-bar-md pt-2">
                                                                                    <canvas id="NPI-bar2"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="NPI-table3" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>ODM</th>
                                                                                                <th>Segment</th>
                                                                                                <th>Impact Scope</th>
                                                                                                <th>Root Cause</th>
                                                                                                <th>Issue Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                                {% for item in impact_scope %}
                                                                                                <tr>
                                                                                                    <td>{{ item.platformName__PartnerName }}</td>
                                                                                                    <td>{{ item.platformName__Product_Segment }}</td>
                                                                                                    <td>{{ item.impact_scope }}</td>
                                                                                                    <td>{{ item.root_cause_category }}</td>
                                                                                                    <td>{{ item.root_cause_category__count }}</td>
                                                                                                </tr>
                                                                                                {% endfor %}
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- row1-->

                                                                 <!-- row2
                                                               <div class="row">

                                                               </div>-->

                                                              <!-- filter_button -->
                                                                <div class="row ml-1">
                                                                    <button id="NPI-filter-button3" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                    <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="NPI-filter3">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                              <!--   <form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin4" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax4" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->


                                                                                <div id="NPI-filter-panel3"></div>
                                                                                <button id="NPI-redraw3" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->

                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <!-- issue3 -->

                                             <!-- issue4 -->
                                             <div class="row ">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#NPI-collapse4" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="NPI-collapse4">
                                                             <h5 class="m-0 font-weight-bold">Factory issue</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse" id="NPI-collapse4">
                                                             <div class="card-body">

                                                                <!-- row1 -->
                                                                <div class="row ">
                                                                    <div class="col-xl-5 col-lg-5 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie-md">
                                                                                    <canvas id="NPI-pie4"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-7 col-lg-7 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-bar-md pt-2">
                                                                                    <canvas id="NPI-bar3"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                     <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="NPI-table4" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>ODM</th>
                                                                                                <th>Root Cause</th>
                                                                                                <th>Build stage</th>
                                                                                                <th>Short-term Category</th>
                                                                                                <th>Long-term Category</th>
                                                                                                <th>Issue Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            {% for item in factory_issue %}
                                                                                            <tr>
                                                                                                <td>{{item.platformName__PartnerName }}</td>
                                                                                                <td>{{ item.root_cause_category }}</td>
                                                                                                <td>{{ item.buildstage }}</td>
                                                                                                <td>{{ item.short_term_category }}</td>
                                                                                                <td>{{ item.long_term_category }}</td>
                                                                                                <td>{{ item.buildstage__count }}</td>
                                                                                            </tr>
                                                                                            {% endfor %}
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <!-- row1 -->

                                                                   <!-- row2
                                                               <div class="row">

                                                               </div>
                                                                -->

                                                                 <!-- filter_button -->
                                                               <div class="row ml-1">
                                                                    <button id="NPI-filter-button4" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                   <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="NPI-filter4">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                            <!--    <form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin5" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax5" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->

                                                                                <div id="NPI-filter-panel4"></div>
                                                                                <button id="NPI-redraw4" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->
                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <!-- issue4 -->

                                             <!-- issue5 -->
                                             <div class="row">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#NPI-collapse5" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="NPI-collapse5">
                                                             <h5 class="m-0 font-weight-bold">Issue Overview</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse" id="NPI-collapse5">
                                                             <div class="card-body">

                                                                <!-- row1 -->
                                                                <div class="row ">
                                                                    <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="NPI-pie5"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-6 col-lg-6 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="NPI-pie6"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                     <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="NPI-table5" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>Root Cause</th>
                                                                                                <th>Short-term Category</th>
                                                                                                <th>Long-term Category</th>
                                                                                                <th>Issue Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            {% for item in statistic_by_rc %}
                                                                                                <tr>
                                                                                                    <td>{{ item.root_cause_category}}</td>
                                                                                                    <td>{{item.short_term_category }}</td>
                                                                                                    <td>{{item.long_term_category}}</td>
                                                                                                    <td>{{ item.root_cause_category__count }}</td>
                                                                                                </tr>
                                                                                            {% endfor %}
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <!-- row1 -->

                                                                   <!-- row2
                                                               <div class="row">

                                                               </div>
                                                                -->

                                                                 <!-- filter_button -->
                                                               <div class="row ml-1">
                                                                    <button id="NPI-filter-button5" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                   <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="NPI-filter5">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                            <!--    <form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin5" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax5" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->

                                                                                <div id="NPI-filter-panel5"></div>
                                                                                <button id="NPI-redraw5" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->
                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <!-- issue5 -->

                                             <!-- issue6 -->
                                             <div class="row ">
                                                 <div class="col-xl-12 col-lg-12 mt-4">
                                                     <div class="card shadow mb-2 h-100">
                                                         <!-- Card Header-->
                                                         <a href="#NPI-collapse6" class="card-header py-3" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="NPI-collapse6">
                                                             <h5 class="m-0 font-weight-bold">MV issue</h5>
                                                         </a>
                                                            <!--Collapse Card Content -->
                                                         <div class="collapse" id="NPI-collapse6">
                                                             <div class="card-body">

                                                                <!-- row1 -->
                                                                <div class="row ">
                                                                    <div class="col-xl-5 col-lg-5 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="NPI-pie7"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-7 col-lg-7 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-bar-md pt-2">
                                                                                    <canvas id="NPI-bar4"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                     <div class="col-xl-7 col-lg-7 mb-3" style="display:none;">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="table-responsive">
                                                                                    <table id="NPI-table6" class="display compact nowrap">
                                                                                        <thead>
                                                                                            <tr>
                                                                                                <th>ODM</th>
                                                                                                <th>Root Cause</th>
                                                                                                <th>Build stage</th>
                                                                                                <th>Short-term Category</th>
                                                                                                <th>Long-term Category</th>
                                                                                                <th>Issue Qty</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                  <tbody>
                                                                                            {% for item in factory_issue %}
                                                                                            <tr>
                                                                                                <td>{{item.platformName__PartnerName }}</td>
                                                                                                <td>{{ item.root_cause_category }}</td>
                                                                                                <td>{{ item.buildstage }}</td>
                                                                                                <td>{{ item.short_term_category }}</td>
                                                                                                <td>{{ item.long_term_category }}</td>
                                                                                                <td>{{ item.buildstage__count }}</td>
                                                                                            </tr>
                                                                                            {% endfor %}
                                                                                        </tbody>

                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <!-- row1 -->

                                                                   <!-- row2-->
                                                                <div class="row">
                                                                    <div class="col-xl-5 col-lg-5 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-pie">
                                                                                    <canvas id="NPI-pie8"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-xl-7 col-lg-7 mb-3">
                                                                        <div class="card shadow mb-3 h-100">
                                                                            <div class="card-body">
                                                                                <div class="chart-bar-md pt-2">
                                                                                    <canvas id="NPI-bar5"></canvas>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                               </div>
                                                             <!-- row2-->

                                                                 <!-- filter_button -->
                                                               <div class="row ml-1">
                                                                    <button id="NPI-filter-button6" class="btn btn-secondary btn-icon-split btn-sm">
                                                                        <span class="icon text-white-50">
                                                                            <i class="icon fa fa-arrow-right"></i>
                                                                        </span>
                                                                        <span class="text">Filters</span>
                                                                    </button>
                                                                   <span class="text ml-3 mt-2 text-xs">(Multi-selection is available, please use “Left click” or press “Ctrl” to do so)</span>
                                                                </div>
                                                                 <!-- filter button -->

                                                                <!-- filter -->
                                                                <div class="row mt-2" style="display:none" id="NPI-filter6">
                                                                    <div class="col-xl-12 col-lg-12">
                                                                        <div class="card shadow">
                                                                            <div class="card-body">

                                                                            <!--    <form action="" method="post">
                                                                                    <span>Date range control ： </span>
                                                                                    <input type="date" name="NPI_datemin5" value="2022-01-01">
                                                                                    <span>~</span>
                                                                                    <input type="date" name="NPI_datemax5" value="2022-12-31">

                                                                                    <button class="btn btn-secondary btn-icon-split btn-sm ml-2" type="sumbit">
                                                                                        <span class="text">Sumbit</span>
                                                                                    </button>

                                                                                </form>-->

                                                                                <div id="NPI-filter-panel6"></div>
                                                                                <button id="NPI-redraw6" class="btn btn-primary btn-icon-split btn-sm">
                                                                                    <span class="icon text-white-50">
                                                                                        <i class="icon fa fa-arrow-right"></i>
                                                                                    </span>
                                                                                    <span class="text">Redraw Charts</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- filter -->
                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                        <!-- issue6 -->




                                        </div>
                                        <!-- NPI-tab-page -->

                                        <!-- SystemCosmetic-tab-page -->
                                         <div class="tab-pane" role="tabpanel" id="SystemCosmetic-tab-page" >

                                         </div>
                                        <!-- SystemCosmetic-tab-page -->

                                         <!-- Sustaining-tab-page -->
                                         <div class="tab-pane" role="tabpanel" id="Sustaining-tab-page">

                                        </div>
                                        <!-- Sustaining-tab-page -->
                                    </div>
                                    <!-- tab 內頁 -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  tab 分頁 -->

                </div>
                <!-- Page Content -->

            </div>
            <!-- Main Content -->

        </div>
        <!-- Content Wrapper -->

    </div>
    <!-- Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="icon fa fa-angle-up"></i>
    </a>
    <!-- Scroll to Top Button-->

    <!-- js-->
<script src="{% static 'dashboard/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
<!-- datatable 和 searchpanes 和導出按鈕 共同的-->
<script src="{% static 'dashboard/vendor/datatables/jquery-3.5.1.js'%}"></script>
<script src="{% static 'dashboard/vendor/datatables/jquery.dataTables.min.js'%}"></script>
<!-- 導出按鈕-->
<script src="{% static 'dashboard/vendor/datatables/dataTables.buttons.min.js'%}"></script>
<script src="{% static 'dashboard/vendor/datatables/jszip.min.js'%}"></script>
<script src="{% static 'dashboard/vendor/datatables/buttons.html5.min.js'%}"></script>
<!-- searchpanes -->
<script src="{% static 'dashboard/vendor/searchpanes/dataTables.searchPanes.min.js'%}"></script>
<script src="{% static 'dashboard/vendor/searchpanes/dataTables.select.min.js'%}"></script>
<!-- chartjs -->
<script src="{% static 'dashboard/vendor/chartjs/Chart.min.js'%}"></script>
<!-- chartjs 顏色套件 -->
<script src="{% static 'dashboard/vendor/chartjs/chartjs-plugin-colorschemes.min.js'%}"></script>
<!-- chartjs 顯示表分比套件-->
<script src="{% static 'dashboard/vendor/chartjs/chartjs-plugin-labels.js'%}"></script>
<!-- datatable -->
<script src="{% static 'dashboard/js/datatables-demo.js'%}"></script>

</body>
{% endblock content %}